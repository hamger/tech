### 描述一次完整的 HTTP 请求与响应

1. 域名解析：依次搜索浏览器自身的 DNS 缓存、操作系统自身的 DNS 缓存、本地配置的首选 DNS 服务器、根域的 DNS 的 IP 地址
2. 建立 TCP 连接：三次握手（为了防止已失效的连接请求报文段突然又传送到了服务端）
3. Web 浏览器向 Web 服务器发送请求命令
4. Web 浏览器发送请求头信息，如果是 post 请求会继续提交请求体
5. Web 服务器应答
6. Web 服务器发送应答头信息
7. Web 服务器向浏览器发送数据
8. 关闭 TCP 连接：四次挥手

> 数据从 A 端到 B 端依次经过了：A 端的应用层、传输层、网络层、链路层（每通过一层增加首部），B 端的链路层、网络层、传输层、应用层（每通过一层删除首部）。

[一次完整的 HTTP 请求与响应涉及了哪些知识](https://juejin.im/entry/58ce00c5ac502e00589b4bde)

### http 与 https 的区别

| 区别     | http                                                            | https                                                                                                            |
| -------- | --------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| 协议     | 运行在 TCP 之上，明文传输，客户端与服务器端都无法验证对方的身份 | 身披 SSL( Secure Socket Layer )外壳的 HTTP，运行于 SSL 上，SSL 运行于 TCP 之上， 是添加了加密和认证机制的 HTTP。 |
| 端口     | 80                                                              | 443                                                                                                              |
| 资源消耗 | 较少                                                            | 由于加解密处理，会消耗更多的 CPU 和内存资源                                                                      |
| 开销     | 无需证书                                                        | 需要证书，而证书一般需要向认证机构购买                                                                           |
| 加密机制 | 无                                                              | 共享密钥加密和公开密钥加密并用的混合加密机制                                                                     |
| 安全性   | 弱                                                              | 由于加密机制，安全性强                                                                                           |

### http/2 优势

- 多路复用 (Multiplexing)：允许同时通过单一的 HTTP/2 连接发起多重的请求-响应消息
- 二进制分帧：在应用层(HTTP/2)和传输层(TCP or UDP)之间增加一个二进制分帧层
- 服务端推送（Server Push）：服务端推送是一种在客户端请求之前发送数据的机制

[HTTP/2.0 相比 1.0 有哪些重大改进](https://www.zhihu.com/question/34074946)

### HTTP 缓存

HTTP 缓存有多种规则，根据是否需要重新向服务器发起请求来分类，我将其分为两大类：强制缓存，协商缓存（也叫对比缓存）。
对于强缓存，浏览器在第一次请求的时候，会直接下载资源，然后缓存在本地，第二次请求的时候，直接使用缓存，不发起 http 请求。
对于协商缓存，第一次请求保存资源标识与时间，第二次请求向服务器发送资源标识和最后缓存时间，服务端进行校验，如果失效则返回 200 和新的资源，如果资源没有变更则返回 304 。

强缓存方案：

- Exprires：属于 HTTP 1.0 的内容，表示服务端返回的到期时间，缺陷是在服务端和客户端时间不同步的情况下会导致缓存命中误差。

- Cache-control：常见的取值有 private、public、no-cache、max-age，no-store，默认为 private。

```
private:         客户端可以缓存
public:          客户端和代理服务器都可以缓存
max-age=xxx:     缓存的内容将在 xxx 秒后失效
no-cache:        需要使用对比缓存来验证缓存数据
no-store:        所有内容都不会缓存，强制缓存和对比缓存都不会触发
```

协商缓存方案：

- Last-modified / If-Modified-Since：都是表示时间的字符串，响应头中带 Last-modified 表明资源的修改时间，第二次请求的时候客户端带上请求头 If-Modified-Since ，表示资源上次的修改时间，服务端进行对比。

- ETag / If-None-Match：都是一个标识字符串，优先级高于 Last-Modified / If-Modified-Since，第一次请求的时候，服务端会返回 ETag 标识给客户端，第二次请求的时候客户端请求头带上 If-None-Match 标识，服务端进行对比。

[HTTP 缓存机制详解](https://juejin.im/entry/599afbe5f265da247c4ee6e3)

### GET 与 POST 的区别

GET 和 POST 本质上就是 TCP 链接，并无差别。但是由于 HTTP 的规定和浏览器/服务器的限制，导致他们在应用过程中体现出一些不同。GET 产生一个 TCP 数据包（ header 和 data ）；POST 产生两个 TCP 数据包（先发送 header，服务器响应 100 ，再发送 data）。

- GET 参数通过 URL 传递，POST 放在 Request body 中。
- GET 请求会被浏览器主动 cache，而 POST 不会，除非手动设置。
- GET 请求只能进行 url 编码，而 POST 支持多种编码方式。
- GET 请求在 URL 中传送的参数是有长度限制的，而 POST 没有。
- 对参数的数据类型，GET 只接受 ASCII 字符，而 POST 没有限制。

[HTTP 中 GET 与 POST 的区别](https://mp.weixin.qq.com/s?__biz=MzI3NzIzMzg3Mw==&mid=100000054&idx=1&sn=71f6c214f3833d9ca20b9f7dcd9d33e4#rd)
